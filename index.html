<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DGS ROI Calculator Suite</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --green: #3fa36b;
      --dark: #1e1e1e;
      --light: #f9f9f9;
      --gray: #dcdcdc;
    }
    * { box-sizing: border-box; font-family: "Inter", sans-serif; }
    body {
      margin: 0; display: flex; background: var(--light); color: #333;
      height: 100vh;
    }
    /* Sidebar */
    .sidebar {
      width: 240px;
      background: var(--dark);
      color: white;
      display: flex;
      flex-direction: column;
      padding: 20px;
    }
    .sidebar h2 { font-size: 1.4rem; margin-bottom: 1rem; }
    .sidebar a {
      color: white;
      text-decoration: none;
      padding: 10px 0;
      display: block;
      font-size: 0.95rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .sidebar a:hover { color: var(--green); }

    /* Main content */
    .main {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    h1 {
      color: var(--green);
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
    }
    .section {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    .section h2 {
      margin-top: 0;
      font-size: 1.4rem;
      color: var(--dark);
    }
    label { display: block; margin-top: 10px; font-size: 0.9rem; }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border: 1px solid var(--gray);
      border-radius: 6px;
    }
    button {
      background: var(--green);
      color: white;
      border: none;
      padding: 10px 16px;
      margin-top: 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover { background: #318d5a; }
    .result { font-weight: bold; margin-top: 10px; }
    canvas { margin-top: 15px; }

    /* Scenario box */
    .scenarios { margin-top: 20px; }
    .scenario-item {
      background: #f1f1f1;
      padding: 10px;
      border-radius: 8px;
      margin-top: 8px;
    }

    footer {
      text-align: center;
      padding: 20px;
      background: var(--dark);
      color: white;
    }

    @media (max-width: 768px) {
      .sidebar { display: none; }
    }
  </style>
</head>
<body>

  <div class="sidebar">
    <h2>DGS ROI Suite</h2>
    <a href="#process">‚öôÔ∏è Process ROI</a>
    <a href="#software">üíª Software ROI</a>
    <a href="#training">üìö Training ROI</a>
    <a href="#payback">‚è≥ Payback</a>
    <a href="#break-even">üìà Break-Even</a>
    <a href="#npv">üìä NPV / IRR</a>
    <a href="#scenarios">üìù Scenarios</a>
  </div>

  <div class="main">
    <h1>ROI Calculator Dashboard</h1>
    <p>Analyze process, software, and training ROI ‚Äî all in one place.</p>

    <!-- Process Optimization ROI -->
    <div class="section" id="process">
      <h2>‚öôÔ∏è Process Optimization ROI</h2>
      <label>Hours Saved per Week</label><input type="number" id="proc_hours" value="10">
      <label>Hourly Rate ($)</label><input type="number" id="proc_rate" value="50">
      <label>Implementation Cost ($)</label><input type="number" id="proc_cost" value="5000">
      <label>Years</label><input type="number" id="proc_years" value="3">
      <button onclick="calcProcess()">Calculate ROI</button>
      <div class="result" id="proc_result">‚Äî</div>
      <canvas id="proc_chart"></canvas>
    </div>

    <!-- Software ROI -->
    <div class="section" id="software">
      <h2>üíª Software ROI</h2>
      <label>Annual Savings ($)</label><input type="number" id="soft_savings" value="20000">
      <label>Annual Cost ($)</label><input type="number" id="soft_cost" value="5000">
      <label>Years</label><input type="number" id="soft_years" value="3">
      <button onclick="calcSoftware()">Calculate ROI</button>
      <div class="result" id="soft_result">‚Äî</div>
      <canvas id="soft_chart"></canvas>
    </div>

    <!-- Training ROI -->
    <div class="section" id="training">
      <h2>üìö Training ROI</h2>
      <label>Productivity Gain (%)</label><input type="number" id="train_gain" value="15">
      <label>Revenue per Employee ($)</label><input type="number" id="train_revenue" value="80000">
      <label>Training Cost ($)</label><input type="number" id="train_cost" value="10000">
      <label>Years</label><input type="number" id="train_years" value="3">
      <button onclick="calcTraining()">Calculate ROI</button>
      <div class="result" id="train_result">‚Äî</div>
      <canvas id="train_chart"></canvas>
    </div>

    <!-- Payback Period -->
    <div class="section" id="payback">
      <h2>‚è≥ Payback Period</h2>
      <label>Investment ($)</label><input type="number" id="pay_invest" value="10000">
      <label>Monthly Benefit ($)</label><input type="number" id="pay_monthly" value="1000">
      <button onclick="calcPayback()">Calculate Payback</button>
      <div class="result" id="pay_result">‚Äî</div>
    </div>

    <!-- Break-Even -->
    <div class="section" id="break-even">
      <h2>üìà Break-Even Analysis</h2>
      <label>Fixed Cost ($)</label><input type="number" id="bre_fixed" value="5000">
      <label>Price per Unit ($)</label><input type="number" id="bre_price" value="200">
      <label>Variable Cost per Unit ($)</label><input type="number" id="bre_variable" value="40">
      <button onclick="calcBreakEven()">Calculate Break-Even</button>
      <div class="result" id="bre_result">‚Äî</div>
    </div>

    <!-- NPV / IRR -->
    <div class="section" id="npv">
      <h2>üìä NPV / IRR</h2>
      <label>Initial Investment ($)</label><input type="number" id="npv_init" value="50000">
      <label>Cash Flows (comma separated)</label><input type="text" id="npv_flows" value="15000,18000,20000,22000">
      <label>Discount Rate (%)</label><input type="number" id="npv_rate" value="12">
      <button onclick="calcNPV()">Calculate NPV / IRR</button>
      <div class="result" id="npv_result">‚Äî</div>
    </div>

    <!-- Scenarios -->
    <div class="section" id="scenarios">
      <h2>üìù Saved Scenarios</h2>
      <button onclick="saveScenario()">Save Scenario</button>
      <button onclick="exportCSV()">Export CSV</button>
      <div class="scenarios" id="scenario_list"></div>
    </div>
  </div>

  <footer>
    ¬© 2025 DGS Consulting ‚Äî ROI Calculator Suite | <a href="#" style="color:#3fa36b;">Privacy</a>
  </footer>

  <script>
    let charts = {};
    let scenarios = [];

    function fmt(n){return Number(n).toLocaleString('en-US',{style:'currency',currency:'USD'});}

    // üìä Process ROI
    function calcProcess(){
      let h=+proc_hours.value, r=+proc_rate.value, c=+proc_cost.value, y=+proc_years.value;
      let annual=h*r*52;
      let roi=(annual*y - c)/c*100;
      proc_result.innerHTML=`ROI: ${roi.toFixed(1)}% | Total Value: ${fmt(annual*y - c)}`;
      updateChart('proc_chart',y,(i)=>annual*i - c);
    }

    // üíª Software ROI
    function calcSoftware(){
      let s=+soft_savings.value, c=+soft_cost.value, y=+soft_years.value;
      let net=(s - c)*y;
      let roi=net/(c*y)*100;
      soft_result.innerHTML=`ROI: ${roi.toFixed(1)}% | Net Value: ${fmt(net)}`;
      updateChart('soft_chart',y,(i)=> (s-c)*i);
    }

    // üìö Training ROI
    function calcTraining(){
      let g=+train_gain.value/100, rev=+train_revenue.value, cost=+train_cost.value, y=+train_years.value;
      let gain=rev*g;
      let net=(gain*y)-cost;
      let roi=net/cost*100;
      train_result.innerHTML=`ROI: ${roi.toFixed(1)}% | Net Value: ${fmt(net)}`;
      updateChart('train_chart',y,(i)=> gain*i - cost);
    }

    // ‚è≥ Payback
    function calcPayback(){
      let inv=+pay_invest.value, m=+pay_monthly.value;
      pay_result.innerHTML=`Payback Period: ${(inv/m).toFixed(1)} months`;
    }

    // üìà Break-Even
    function calcBreakEven(){
      let f=+bre_fixed.value, p=+bre_price.value, v=+bre_variable.value;
      if(p<=v){bre_result.innerHTML='Error: Price must be greater than variable cost';return;}
      let q=f/(p-v);
      bre_result.innerHTML=`Break-Even Units: ${Math.ceil(q)}`;
    }

    // üìä NPV / IRR
    function calcNPV(){
      let init=+npv_init.value, flows=npv_flows.value.split(',').map(x=>+x.trim()), rate=+npv_rate.value/100;
      let npv=-init;
      for(let t=0;t<flows.length;t++) npv+=flows[t]/Math.pow(1+rate,t+1);
      let irr=calcIRR([-init,...flows])*100;
      npv_result.innerHTML=`NPV: ${fmt(npv)} | IRR: ${irr.toFixed(2)}%`;
    }
    function calcIRR(flows,guess=0.1){
      let irr=guess;
      for(let i=0;i<100;i++){
        let npv=0,dNPV=0;
        for(let t=0;t<flows.length;t++){
          npv+=flows[t]/Math.pow(1+irr,t);
          if(t>0)dNPV+=-t*flows[t]/Math.pow(1+irr,t+1);
        }
        let newIrr=irr-npv/dNPV;
        if(Math.abs(newIrr-irr)<1e-7)break;
        irr=newIrr;
      }
      return irr;
    }

    // üìà Chart Updater
    function updateChart(id,years,calc){
      let ctx=document.getElementById(id);
      let labels=[],data=[];
      for(let i=1;i<=years;i++){labels.push('Year '+i);data.push(calc(i));}
      if(!charts[id]){
        charts[id]=new Chart(ctx,{type:'line',
          data:{labels:labels,datasets:[{label:'Cumulative Value',data:data,borderColor:'#3fa36b',fill:false}]},
          options:{responsive:true,plugins:{legend:{display:false}}}});
      }else{
        charts[id].data.labels=labels;
        charts[id].data.datasets[0].data=data;
        charts[id].update();
      }
    }

    // üìù Scenario Saving & Export
    function saveScenario(){
      let note=prompt('Name this scenario:');
      if(!note)return;
      let data={
        process:proc_result.innerText,
        software:soft_result.innerText,
        training:train_result.innerText,
        payback:pay_result.innerText,
        breakEven:bre_result.innerText,
        npv:npv_result.innerText
      };
      scenarios.push({note,data});
      renderScenarios();
    }

    function renderScenarios(){
      let box=document.getElementById('scenario_list');
      box.innerHTML='';
      scenarios.forEach((s,i)=>{
        let div=document.createElement('div');
        div.className='scenario-item';
        div.innerHTML=`<strong>${s.note}</strong><br>
          Process: ${s.data.process}<br>
          Software: ${s.data.software}<br>
          Training: ${s.data.training}<br>
          Payback: ${s.data.payback}<br>
          Break-Even: ${s.data.breakEven}<br>
          NPV/IRR: ${s.data.npv}`;
        box.appendChild(div);
      });
    }

    function exportCSV(){
      let csv='Scenario,Process,Software,Training,Payback,BreakEven,NPV/IRR\n';
      scenarios.forEach(s=>{
        csv+=`"${s.note}","${s.data.process}","${s.data.software}","${s.data.training}","${s.data.payback}","${s.data.breakEven}","${s.data.npv}"\n`;
      });
      let blob=new Blob([csv],{type:'text/csv'});
      let a=document.createElement('a');
      a.href=URL.createObjectURL(blob);
      a.download='ROI_Scenarios.csv';
      a.click();
      URL.revokeObjectURL(a.href);
    }
  </script>

</body>
</html>
